# -- coding: utf-8 --

from eth_typing.ethpm import ContractName
from web3 import Web3
import sys 
url = 'https://rinkeby.infura.io/v3/475580ae3a564f4d8cc295ec8d683c99'

abi_contract = [
	{
		"inputs": [
			{
				"internalType": "int256",
				"name": "_id_incidencia",
				"type": "int256"
			},
			{
				"internalType": "int256",
				"name": "_id_registro_pk",
				"type": "int256"
			},
			{
				"internalType": "string",
				"name": "_hash_file",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_tipo",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_user",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_date",
				"type": "string"
			}
		],
		"name": "addArchivo",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "int256",
				"name": "_id_incidencia",
				"type": "int256"
			}
		],
		"name": "numArchivo",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "int256",
				"name": "_id_incidencia",
				"type": "int256"
			},
			{
				"internalType": "string",
				"name": "_tipo",
				"type": "string"
			}
		],
		"name": "numArchivoByType",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	}
]

bytecode_contract= "6080604052600060015534801561001557600080fd5b506108dd806100256000396000f3fe608060405234801561001057600080fd5b50600436106100415760003560e01c80631a9036f514610046578063292b9395146100765780639804f62e14610092575b600080fd5b610060600480360381019061005b9190610599565b6100c2565b60405161006d9190610692565b60405180910390f35b610090600480360381019061008b91906104b0565b61015e565b005b6100ac60048036038101906100a79190610487565b610275565b6040516100b99190610692565b60405180910390f35b600080600090506000600190505b600154811161015357846000808381526020019081526020016000206000015414801561012c57508380519060200120600080838152602001908152602001600020600301604051610122919061067b565b6040518091039020145b1561014057818061013c906107a9565b9250505b808061014b906107a9565b9150506100d0565b508091505092915050565b61016886856102d5565b61026d576001600081548092919061017f906107a9565b9190505550856000806001548152602001908152602001600020600001819055508460008060015481526020019081526020016000206001018190555083600080600154815260200190815260200160002060020190805190602001906101e7929190610367565b508260008060015481526020019081526020016000206003019080519060200190610213929190610367565b50816000806001548152602001908152602001600020600401908051906020019061023f929190610367565b50806000806001548152602001908152602001600020600501908051906020019061026b929190610367565b505b505050505050565b600080600090506000600190505b60015481116102cb57836000808381526020019081526020016000206000015414156102b85781806102b4906107a9565b9250505b80806102c3906107a9565b915050610283565b5080915050919050565b600080600090506000600190505b600154811161035c57846000808381526020019081526020016000206000015414801561033f57508380519060200120600080838152602001908152602001600020600201604051610335919061067b565b6040518091039020145b1561034957600191505b8080610354906107a9565b9150506102e3565b508091505092915050565b82805461037390610746565b90600052602060002090601f01602090048101928261039557600085556103dc565b82601f106103ae57805160ff19168380011785556103dc565b828001600101855582156103dc579182015b828111156103db5782518255916020019190600101906103c0565b5b5090506103e991906103ed565b5090565b5b808211156104065760008160009055506001016103ee565b5090565b600061041d610418846106d2565b6106ad565b90508281526020810184848401111561043557600080fd5b610440848285610737565b509392505050565b60008135905061045781610890565b92915050565b600082601f83011261046e57600080fd5b813561047e84826020860161040a565b91505092915050565b60006020828403121561049957600080fd5b60006104a784828501610448565b91505092915050565b60008060008060008060c087890312156104c957600080fd5b60006104d789828a01610448565b96505060206104e889828a01610448565b955050604087013567ffffffffffffffff81111561050557600080fd5b61051189828a0161045d565b945050606087013567ffffffffffffffff81111561052e57600080fd5b61053a89828a0161045d565b935050608087013567ffffffffffffffff81111561055757600080fd5b61056389828a0161045d565b92505060a087013567ffffffffffffffff81111561058057600080fd5b61058c89828a0161045d565b9150509295509295509295565b600080604083850312156105ac57600080fd5b60006105ba85828601610448565b925050602083013567ffffffffffffffff8111156105d757600080fd5b6105e38582860161045d565b9150509250929050565b600081546105fa81610746565b6106048186610718565b9450600182166000811461061f576001811461063057610663565b60ff19831686528186019350610663565b61063985610703565b60005b8381101561065b5781548189015260018201915060208101905061063c565b838801955050505b50505092915050565b6106758161072d565b82525050565b600061068782846105ed565b915081905092915050565b60006020820190506106a7600083018461066c565b92915050565b60006106b76106c8565b90506106c38282610778565b919050565b6000604051905090565b600067ffffffffffffffff8211156106ed576106ec610850565b5b6106f68261087f565b9050602081019050919050565b60008190508160005260206000209050919050565b600081905092915050565b6000819050919050565b6000819050919050565b82818337600083830152505050565b6000600282049050600182168061075e57607f821691505b6020821081141561077257610771610821565b5b50919050565b6107818261087f565b810181811067ffffffffffffffff821117156107a05761079f610850565b5b80604052505050565b60006107b48261072d565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8214156107e7576107e66107f2565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6000601f19601f8301169050919050565b61089981610723565b81146108a457600080fd5b5056fea2646970667358221220220ce11306784b096ffa7768e82a5a8951bba2b4016795e41db965ecd91ec9c764736f6c63430008010033"

account_a = "0xD667e6efC8CefA7e9874708608Ca79d0f33852Ee"
key_a = "040d6a0303227e4a64afed3b4f93f3580aef85f4a1f1d264ff292dd80050f438"
constract_addres= "0xa4efaaccc0a4e886b69800f35dc1981f31a59431"

id_incidencia=sys.argv[1]

web3 = Web3(Web3.HTTPProvider(url))

def read():
    

    address = web3.toChecksumAddress(constract_addres)
    contract = web3.eth.contract(address=address, abi= abi_contract)
    data = contract.functions.numArchivo(int(id_incidencia)).call()
   
    print(data)

read()